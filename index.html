<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prescription Maker</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background:#f2f2f2;
}
.container {
    display:flex;
    height:100vh;
    overflow:hidden;
}
/* Left Entry Panel */
.entry-panel {
    width:50%;
    background:#fff;
    padding:20px;
    box-sizing:border-box;
    overflow-y:auto;
    border-right:2px solid #ccc;
}
.entry-panel h2{margin-top:0;}
.entry-panel label{display:block;margin-top:10px;font-weight:bold;}
.entry-panel input, .entry-panel select, .entry-panel textarea {
    width:100%;
    padding:8px;
    margin-top:5px;
    border-radius:5px;
    border:1px solid #ccc;
    box-sizing:border-box;
}
.entry-panel textarea{resize:vertical;}
.entry-panel button {
    padding:10px 15px;
    margin:10px 5px 0 0;
    border:none;
    background:#004080;
    color:#fff;
    border-radius:5px;
    cursor:pointer;
}
.entry-panel button:hover {background:#003366;}

/* Right Preview Panel */
.preview-panel {
    width:50%;
    background:#fff;
    padding:20px;
    box-sizing:border-box;
    overflow-y:auto;
}

/* Prescription Styling */
.prescription {
    width:100%;
    min-height:29.7cm;
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    box-sizing:border-box;
    background:#fff;
    line-height:1.5;
}
.header {
    display:flex;
    justify-content:space-between;
    margin-bottom:20px;
}
.header h3, .header h4{margin:0;}
.patient-info {margin-bottom:20px;}
.patient-info .row{display:flex;justify-content:space-between;width:100%;}
.content {display:flex;gap:20px;border-top:2px solid #000;padding-top:20px;flex:1;}
.left {width:33%;border-right:2px solid #000;display:flex;flex-direction:column;justify-content:space-between;}
.left div{flex:1;margin-bottom:20px;}
.right {width:67%;padding-left:10px;}
.right > div{font-size:20px;}
ul{padding-left:20px;margin:0;}
.signature{text-align:right;margin-top:20px;font-weight:bold;}
.drug-table{width:100%;border-collapse:collapse;margin-top:10px;}
.drug-table th, .drug-table td{padding:5px;text-align:left;}

@media print{
    body *{visibility:hidden;}
    .prescription, .prescription *{visibility:visible;}
    .prescription{width:100%;height:29.7cm;padding:40px 60px;display:flex;flex-direction:column;}
}
</style>
</head>
<body>

<div class="container">

<!-- Left Entry Panel -->
<div class="entry-panel">
    <h2>Patient & Prescription Entry</h2>

    <label>Patient Name</label>
    <input type="text" id="patientName" placeholder="Full Name" oninput="updatePreview()">

    <div style="display:flex; gap:10px; margin-top:10px;">
        <div style="flex:1;">
            <label>Gender</label>
            <select id="patientGender" onchange="updatePreview()">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div style="flex:1;">
            <label>Age</label>
            <input type="number" id="patientAge" placeholder="Age" oninput="updatePreview()">
        </div>
        <div style="flex:1;">
            <label>Weight (kg)</label>
            <input type="number" id="patientWeight" placeholder="Weight" oninput="updatePreview()">
        </div>
    </div>

    <label>Date of Prescription</label>
    <input type="date" id="prescriptionDate" onchange="updatePreview()">

    <label>Doctor Name & Credentials</label>
    <input type="text" id="doctorName" placeholder="Dr. A B C, MBBS, FCPS" oninput="updatePreview()">
    <label>Clinic / Hospital</label>
    <input type="text" id="clinicName" placeholder="City Clinic" oninput="updatePreview()">

    <label>Chief Complaints</label>
    <textarea id="complaints" rows="2" oninput="updatePreview()"></textarea>
    <label>On Examination</label>
    <textarea id="examination" rows="2" oninput="updatePreview()"></textarea>
    <label>Investigations</label>
    <textarea id="investigations" rows="2" oninput="updatePreview()"></textarea>
    <label>Diagnosis</label>
    <textarea id="diagnosis" rows="2" oninput="updatePreview()"></textarea>

    <label>Drugs</label>
    <table class="drug-table" id="drugTable">
        <thead>
            <tr>
                <th>Type</th>
                <th>Drug Name</th>
                <th>Dose</th>
                <th>Times/Day</th>
                <th>Duration</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button type="button" onclick="addDrugRow()">+ Add Drug</button>
    <button type="button" onclick="printPrescription()">Print Prescription</button>
</div>

<!-- Right Preview Panel -->
<div class="preview-panel">
    <div class="prescription" id="prescriptionPreview">
        <div class="header">
            <h4 id="clinicPreview">Clinic / Hospital</h4>
            <h3 id="docNamePreview">Dr. Name, Credentials</h3>
        </div>
        <div class="patient-info">
            <strong>Date:</strong> <span id="datePreview">--</span><br>
            <strong>Patient:</strong> <span id="patientPreview">Name</span><br>
            <div class="row">
                <span><strong>Gender:</strong> <span id="genderPreview">--</span></span>
                <span><strong>Age:</strong> <span id="agePreview">--</span></span>
                <span><strong>Weight:</strong> <span id="weightPreview">--</span></span>
            </div>
        </div>
        <div class="content">
            <div class="left">
                <div><strong>Chief Complaints:</strong> <span id="complaintsPreview">--</span></div>
                <div><strong>On Examination:</strong> <span id="examinationPreview">--</span></div>
                <div><strong>Investigations:</strong> <span id="investigationsPreview">--</span></div>
            </div>
            <div class="right">
                <div><strong>Rx:</strong>
                    <ul id="drugsPreview"></ul>
                </div>
            </div>
        </div>
        <div class="signature">Doctor Signature</div>
    </div>
</div>

</div>

<script>
document.getElementById('prescriptionDate').valueAsDate = new Date();

function addDrugRow(){
    const tbody = document.querySelector('#drugTable tbody');
    const tr = document.createElement('tr');
    tr.innerHTML = `
        <td>
            <select oninput="updatePreview()">
                <option value="">Select</option>
                <option value="Tab">Tab</option>
                <option value="Syp">Syp</option>
                <option value="Cap">Cap</option>
                <option value="Sup">Sup</option>
                <option value="IV">IV</option>
                <option value="Inf">Inf</option>
            </select>
        </td>
        <td><input type="text" placeholder="Drug Name" oninput="updatePreview()"></td>
        <td><input type="text" placeholder="Dose" oninput="updatePreview()"></td>
        <td><input type="text" placeholder="Times/Day" oninput="updatePreview()"></td>
        <td><input type="text" placeholder="Duration" oninput="updatePreview()"></td>
    `;
    tbody.appendChild(tr);
}

// Live preview update
function updatePreview(){
    document.getElementById('docNamePreview').innerText = document.getElementById('doctorName').value || 'Dr. Name, Credentials';
    document.getElementById('clinicPreview').innerText = document.getElementById('clinicName').value || 'Clinic / Hospital';

    const name = document.getElementById('patientName').value || '--';
    const age = document.getElementById('patientAge').value || '--';
    const gender = document.getElementById('patientGender').value || '--';
    const weight = document.getElementById('patientWeight').value || '--';
    document.getElementById('patientPreview').innerText = name;
    document.getElementById('agePreview').innerText = age + ' yr';
    document.getElementById('genderPreview').innerText = gender;
    document.getElementById('weightPreview').innerText = weight + ' kg';

    document.getElementById('datePreview').innerText = document.getElementById('prescriptionDate').value || '--';
    document.getElementById('complaintsPreview').innerText = document.getElementById('complaints').value || '--';
    document.getElementById('examinationPreview').innerText = document.getElementById('examination').value || '--';
    document.getElementById('investigationsPreview').innerText = document.getElementById('investigations').value || '--';

    const drugsPreview = document.getElementById('drugsPreview');
    drugsPreview.innerHTML = '';
    document.querySelectorAll('#drugTable tbody tr').forEach(row => {
        const cells = row.querySelectorAll('input, select');
        if(cells[1].value.trim() !== ''){
            const type = cells[0].value ? cells[0].value + ' ' : '';
            const li = document.createElement('li');
            li.innerText = `${type}${cells[1].value} - ${cells[2].value||'-'} - ${cells[3].value||'-'} - ${cells[4].value||'-'}`;
            drugsPreview.appendChild(li);
        }
    });
}

function printPrescription(){ window.print(); }
</script>

</body>
</html>
